!function(){function t(e,n,i){function o(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){return o(e[a][1][t]||t)},c,c.exports,t,e,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}return t}()({1:[function(t,e,n){(function(t){(function(){var n,i=function(t,e){return function(){return t.apply(e,arguments)}};n=function(){function t(){this.hasToken=i(this.hasToken,this),this.createIdentification=i(this.createIdentification,this),this.checkIdentificationCallback=i(this.checkIdentificationCallback,this),this.checkIdentification=i(this.checkIdentification,this),this.getIdentification=i(this.getIdentification,this),this.login=i(this.login,this),this.me=void 0,this.identification=void 0,this.getIdentification(),this.getLoginStatus(),this.bind()}return t.prototype.bind=function(){return bind(".button-github-login","click",function(t){return function(){return t.login("github")}}(this)),bind(".button-facebook-login","click",function(t){return function(){return t.login("facebook")}}(this)),bind(".button-logout","click",this.logout)},t.prototype.login=function(t){return redirect(AUTH_URL+t)},t.prototype.logout=function(){return Cookies.set("_ggid","",{expires:0,path:"/",domain:".unlink.men"}),setTimeout(function(){return redirect("/")},500)},t.prototype.getLoginStatus=function(){return this.hasToken()?get(API_URL+"me",function(t){return"connected"===t.status?(this.me=t.user,this.me.verified?View.switch("verified-user"):View.switch("user")):(Cookies.set("_ggid","",{expires:0,path:"/",domain:".unlink.men"}),View.switch("guest"))}.bind(this),{token:ACCESS_TOKEN}):View.switch("guest")},t.prototype.getIdentification=function(){return null===localStorage.getItem("identification")?this.createIdentification():(this.identification=localStorage.getItem("identification"),this.checkIdentification(this.identification))},t.prototype.checkIdentification=function(t){return post(API_URL+"client/check",this.checkIdentificationCallback,{identification:t})},t.prototype.checkIdentificationCallback=function(t){if(void 0===t.message)return this.createIdentification()},t.prototype.createIdentification=function(){return post(API_URL+"client",function(t){var e;return e=t.data.identification,localStorage.setItem("identification",e),this.identification=e}.bind(this))},t.prototype.hasToken=function(){return void 0!==ACCESS_TOKEN&&""!==ACCESS_TOKEN},t}(),t.User=new n,e.exports=n}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){t("./../view/View"),t("./../view/UserView"),t("./../component/User")},{"./../component/User":1,"./../view/UserView":3,"./../view/View":4}],3:[function(t,e,n){(function(t){(function(){var n;n=function(){function t(){}return t.prototype.user_posts={parent:$("#posts-table tbody"),create:function(t,e){var n,i,o;for(null==e&&(e=""),n=0,i=t.length;n<i;n++)o=t[n],o.state=this.handleState(o.state),e+=this.__post(o);return this.parent.html(e)},handleState:function(t){return"published"===t?TEXT.published:"unpublished"===t?TEXT.unpublished:"denied"===t?TEXT.denied:"pending"===t?TEXT.pending:"analysing"===t?TEXT.analysing:"queuing"===t?TEXT.queuing:"failed"===t?TEXT.failed:void 0},__post:function(t){var e,n,i;return i=compoareDatetimes(t.created_at,currentDatetime(-6))?'<img src="/images/old/new.gif" />':"",n=""!==t.id?"#"+PAGE_NAME+t.id:"",e=$("<div />").html(t.content).text(),'<tr data-key="'+t.key+'">\n  <td class="text-center">'+n+'</td>\n  <td class="span7">\n    '+i+'\n    <a href="/post/?key='+t.key+'" target="_blank">\n      '+e+'\n    </a><br />\n  </td>\n  <td class="text-center">'+t.state+'</td>\n  <td class="text-center">'+t.created_at+'</td>\n  <td class="text-center">\n    <button type="button" class="btn btn-danger button-post-delete">刪除</button>\n  </td>\n</tr>'}},t.prototype.user_posts_pagination={parent:$("#posts-table tfoot tr td .pagination ul"),create:function(t,e){var n,i,o,r;if(null==e&&(e=""),1!==t.total_page)for(i=o=1,r=t.total_page;1<=r?o<=r:o>=r;i=1<=r?++o:--o)n=i===t.current_page?"active":"",e+=this.__li(i,n);return this.parent.html(e)},__li:function(t,e){return null==e&&(e=""),'<li class="'+e+'"><a href="/me/posts/?page='+t+'">'+t+"</a></li>"}},t.prototype.user_setting={parent:$("#user-setting-field"),create:function(t,e){return null==e&&(e=""),this.createPublicField(t.public)},createPublicField:function(t){var e;return e=this.__publicField(t),this.parent.append(e)},__publicField:function(t){return'  <div class="checkbox">\n  <input id="public" type="checkbox"'+(1===t?' checked="checked"':"")+'>\n  <label class="css-label" for="public"> 啟用個人頁面</label>\n  <div class="alert alert-block">\n    <p>啟用後您將有個人的專屬作者頁面，並且會顯示在 <a href="/feed/authors/">Feed Authors</a> 列表中，其他人將可以看到你發過的所有文<br /></p>\n  </div>\n</div>'}},t}(),t.UserView=new n,e.exports=n}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(t,e,n){(function(t){(function(){var n;n=function(){function t(){}return t.prototype.switch=function(t){return"verified-user"===t?($("body").removeClass("guest").addClass("user verified"),this.navbar.user()):"user"===t?($("body").removeClass("guest").addClass("user"),this.navbar.user()):($("body").removeClass("user verified").addClass("guest"),this.navbar.guest())},t.prototype.navbar={parent:$("#main-menu-left"),user:function(){var t;return t='<li class="dropdown" id="preview-menu">\n  <a class="dropdown-toggle" data-toggle="dropdown" href="#">\n    Member <b class="caret"></b>\n  </a>\n  <ul class="dropdown-menu">\n    <li><a href="/me/posts/">My posts</a></li>\n    <li><a href="/me/setting/">Setting</a></li>\n    <li><a href="javascript:void(0)" class="button-logout">Logout</a></li>\n  </ul>\n</li>',this.parent.append(t)},guest:function(){var t;return t='<li class="dropdown" id="preview-menu">\n  <a class="dropdown-toggle" data-toggle="dropdown" href="#">\n    Login <b class="caret"></b>\n  </a>\n  <ul class="dropdown-menu">\n    <li><a href="javascript:void(0)" class="button-github-login">GitHub登入</a></li>\n    <li><a href="javascript:void(0)" class="button-facebook-login">Facebook登入</a></li>\n  </ul>\n</li>',this.parent.append(t)}},t.prototype.message={failed:function(t){var e;return e="<span>Load failed</span>",t.append(e)},failed_table:function(t,e){var n;return null==e&&(e=1),n='<tr>\n  <td colspan="'+e+'">\n    <span>Load failed</span>\n  </td>\n</tr>',t.append(n)},null_table:function(t,e,n){var i;return null==e&&(e=1),null==n&&(n=""),i='<tr>\n  <td colspan="'+e+'">\n    <span>No record. '+n+"</span>\n  </td>\n</tr>",t.append(i)},page_not_found:function(t){var e;return e='<div class="alert alert-block alert-danger text-center">\n  <img src="/images/old/shark.gif" /><br /><br />\n  <h4 class="alert-heading">Thiss paage isn avilabie</h4><br />\n  <p>\n    Tho likn yuo flolowed mav bi borken, orr tle pgae mya heva beem remvoed.\n    <br /><br />\n    Wi cann not doo amything fro yyu, pleese fcuk yurself or go home.\n  </p>\n  <br />\n</div>',t.append(e)}},t.prototype.like_button={create:function(t){return this.__view(t.id,t.likes,t.liked)},updateLikeCount:function(t,e,n,i,o){return null==i&&(i=!1),null==o&&(o=""),o+=this.__view(e,n,i),t.parent().replaceWith(o)},__view:function(t,e,n){var i;return null==n&&(n=!1),n=n?" btn-primary":"",i=n?TEXT.liked:TEXT.like,'<div class="like-wrapper">\n  <button type="button" class="btn'+n+' button-like" data-id="'+t+'">\n    <i class="fa fa-thumbs-o-up" aria-hidden="true"></i> '+i+'\n  </button>\n  <span class="post-likes-count">\n    '+e+TEXT.people_liked+"\n  </span>\n</div>"}},t}(),t.View=new n,e.exports=n}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[2]);